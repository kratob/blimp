exports.twitchHttpMock = ->
  highlights = JSON.parse '''
    {"_total":390,"_links":{"self":"https://api.twitch.tv/kraken/channels/bananasaurus_rex/videos?limit=100&offset=0&user=bananasaurus_rex","next":"https://api.twitch.tv/kraken/channels/bananasaurus_rex/videos?limit=100&offset=100&user=bananasaurus_rex"},"videos":[{"title":"[EPILEPSY WARNING] Rex plays I Wanna Be the Permanence 2 - Part 5!","description":"EPILEPSY WARNING || Rex flies into and finishes his playthrough of I Wanna Be the Permanence!","broadcast_id":14991071488,"status":"recorded","tag_list":"","_id":"v6562652","recorded_at":"2015-06-23T17:14:55Z","game":null,"length":16874,"preview":"http://static-cdn.jtvnw.net/v1/AUTH_system/vods_b883/bananasaurus_rex_14991071488_261225140/thumb/thumb0-320x240.jpg","url":"http://www.twitch.tv/bananasaurus_rex/v/6562652","views":193,"fps":{"audio_only":0.0,"medium":29.9976197625087,"mobile":19.9983195680571,"high":29.9976197625087,"low":29.9976197625087,"chunked":59.9958573308788},"resolutions":{"medium":"852x480","mobile":"400x226","high":"1280x720","low":"640x360","chunked":"1280x720"},"broadcast_type":"highlight","_links":{"self":"https://api.twitch.tv/kraken/videos/v6562652","channel":"https://api.twitch.tv/kraken/channels/bananasaurus_rex"},"channel":{"name":"bananasaurus_rex","display_name":"Bananasaurus_Rex"}},{"title":"Rex plays I Wanna Be the Permanence 2 - Part 4!","description":"Rex bibble bobbles his way through I Wanna Be the Permanence 2! Much poop ensues!","broadcast_id":14976203344,"status":"recorded","tag_list":"","_id":"v6561627","recorded_at":"2015-06-22T17:14:43Z","game":null,"length":19197,"preview":"http://static-cdn.jtvnw.net/v1/AUTH_system/vods_51da/bananasaurus_rex_14976203344_260774779/thumb/thumb0-320x240.jpg","url":"http://www.twitch.tv/bananasaurus_rex/v/6561627","views":60,"fps":{"audio_only":0.0,"medium":30.1684557885951,"mobile":19.996076768422,"high":30.1684557885951,"low":30.1684557885951,"chunked":59.9972309715043},"resolutions":{"medium":"852x480","mobile":"400x226","high":"1280x720","low":"640x360","chunked":"1280x720"},"broadcast_type":"highlight","_links":{"self":"https://api.twitch.tv/kraken/videos/v6561627","channel":"https://api.twitch.tv/kraken/channels/bananasaurus_rex"},"channel":{"name":"bananasaurus_rex","display_name":"Bananasaurus_Rex"}},{"title":"Rexernlion","description":"Rex feels bad for people who confuse his voice with NL's.","broadcast_id":14976203344,"status":"recorded","tag_list":"","_id":"v6561897","recorded_at":"2015-06-22T19:11:41Z","game":null,"length":166,"preview":"http://static-cdn.jtvnw.net/v1/AUTH_system/vods_51da/bananasaurus_rex_14976203344_260774779/thumb/thumb0-320x240.jpg","url":"http://www.twitch.tv/bananasaurus_rex/v/6561897","views":164,"fps":{"audio_only":0.0,"medium":30.1684557885951,"mobile":19.996076768422,"high":30.1684557885951,"low":30.1684557885951,"chunked":59.9972309715043},"resolutions":{"medium":"852x480","mobile":"400x226","high":"1280x720","low":"640x360","chunked":"1280x720"},"broadcast_type":"highlight","_links":{"self":"https://api.twitch.tv/kraken/videos/v6561897","channel":"https://api.twitch.tv/kraken/channels/bananasaurus_rex"},"channel":{"name":"bananasaurus_rex","display_name":"Bananasaurus_Rex"}}]}
    '''

  angular.module('twitchHttpMock', ['ngMockE2E', 'blimp'])
    .run ($httpBackend, LsCache) ->
      LsCache.flush()

      $httpBackend.whenGET(/^views/).passThrough()
      $httpBackend.whenJSONP('https://api.twitch.tv/kraken/channels/bananasaurus_rex/videos?callback=JSON_CALLBACK&limit=100&offset=0').respond(highlights)
